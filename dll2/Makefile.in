
HDRS= dll2.H
SRCS= dll2_hash.C
OBJS= $(SRCS:.C=.o)
LIB= libdll2.a
FLAGS= -O3 -Wall -Werror
INCS= 

TEST_HASH_OBJS= test_hash.o test_hash_add.o test_hash_del.o
TEST_BTREE_OBJS= test_btree.o

all: $(LIB) test_hash test_btree

$(LIB): $(OBJS)
	rm -f $(LIB)
	ar cq $(LIB) $(OBJS)
	ranlib $(LIB)

test_hash: $(TEST_HASH_OBJS) $(LIB)
	g++ $(TEST_HASH_OBJS) $(LIB) -o test_hash

test_btree: $(TEST_BTREE_OBJS) $(LIB)
	g++ $(TEST_BTREE_OBJS) $(LIB) -o test_btree

.C.o:
	g++ $(INCS) $(FLAGS) -c $*.C

clean:
	rm -f *.o $(LIB) Makefile *core

depend: Makefile.in $(SRCS) $(HDRS)
	awk 'BEGIN { copy=1; } { if ( copy ) print } /^#DEPENDENCIES/ { copy=0; }' < Makefile > x
	gcc -M $(INCS) $(SRCS) >> x
	mv x Makefile

#DEPENDENCIES
