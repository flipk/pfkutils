
CCOPTS= -I/usr/X11R6/include -O3

TARG= libqcam.a
HDRS= headers.h motion.h pgm.h qcam.h ttydisp.h xwindisp.h
SRCS= main.c qcmex.c motion.c pgm.c qcam.c ttydisp.c xwindisp.c
OBJS= $(SRCS:.c=.o)

all: $(TARG) 

$(TARG): $(OBJS)
	rm -f $(TARG)
	ar cq $(TARG) $(OBJS)

.c.o:
	gcc $(CCOPTS) -c $*.c

depend: Makefile.in $(SRCS) $(HDRS)
	awk 'BEGIN { copy=1; } { if ( copy ) print } /^#DEPENDENCIES/ { copy=0; }' < Makefile > x
	gcc -M $(CCOPTS) $(SRCS) >> x
	mv x Makefile

clean:
	rm -f $(TARG) $(OBJS) *~
	rm -f Makefile

#DEPENDENCIES
